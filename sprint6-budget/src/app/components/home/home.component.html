@for ( product of products; track $index) {
<div class="container-lg services">
    <div class="container d-flex align-items-center justify-content-between w-75">
        <div>
            <h3>{{product.title}}</h3>
            <p>{{product.description}}</p>
        </div>
        <div>
            <h2><span>{{product.price}}</span>€</h2>
        </div>
        <form class="form-check" [formGroup]="serviciosForm">
            <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault" (change)="updateCost()"
                formControlName="checkbox{{$index}}">
            <label class="form-check-label" for="flexCheckDefault">
                Afegir
            </label>

        </form>

        <!-- {{formChecked.value | json}} -->
    </div>
    @if(isChecked && products[$index].title === 'Web') {
    <app-panel [serviciosParentForm]="serviciosForm"></app-panel>
    }
</div>
}

@if(submitted && total === 0) {
<span>You need to choose one service at last!</span>
}

<div class="container-lg services-preu">
    <div class="container  d-flex  justify-content-end align-items-center">
        <h3 class="services-preu--heading">Preu pressuposat:</h3>
        <p class="services-preu--number"><span>{{total}}</span>€</p>
    </div>
</div>

<div class="container-lg contact d-flex align-items-center flex-column">
    <div class="text-start w-75">
        <h3>Demanar pressupost</h3>
    </div>
    <form [formGroup]="serviciosForm" class="d-flex align-items-center justify-content-between w-75 gap-2">
        <div class="">
            <input type="text" class="form-control" id="nom" placeholder="Nom" formControlName="name">

            @if(serviciosForm.get('name')?.errors?.['required'] && serviciosForm.get('name')?.touched) {
            <span>Name is required</span>
            }


        </div>
        <div class="">
            <input type="tel" class="form-control" id="telephone" placeholder="Teléfon" formControlName="telephone">
            @if(serviciosForm.get('telephone')?.errors?.['required'] && serviciosForm.get('telephone')?.touched) {
            <span>Telephone is required</span>
            }
        </div>
        <div class="">
            <input type="email" class="form-control" id="email" placeholder="Email" formControlName="email">
            @if(serviciosForm.get('email')?.errors?.['required'] && serviciosForm.get('email')?.touched) {
            <span>Email is required</span>
            }
            @if(serviciosForm.get('email')?.errors?.['email'] && serviciosForm.get('email')?.touched) {
            <span>Please enter a valid email address</span>
            }
        </div>
        <button (click)="onSubmit()" type="submit" class="btn btn-primary contact-btn">Sol-licitar pressupost <fa-icon
                [icon]="faArrowRight" class="contact-icon"></fa-icon></button>
    </form>
    @if((submitted && serviciosForm.get('name')?.value === "") || (submitted && serviciosForm.get('email')?.value ===
    "")|| (submitted && serviciosForm.get('telephone')?.value === "")) {
    <span>Please complete all fields...</span>
    }
</div>

@if(clients.length > 0) {
<app-budget [clients]="clients"></app-budget>
}